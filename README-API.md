# AI需求计算器 - API与前端交互说明

## 项目概述

本项目是一个企业级AI需求计算器,用于评估AI解决方案的可行性。包含完整的前后端交互逻辑(演示版本)。

## 已实现的功能

### 1. 用户输入模块

用户需要输入以下信息:
- **模型选择**: GPT-4, GPT-3.5, Claude 3 Opus/Sonnet, Llama 3 70B/8B, Mistral Large/7B
- **硬件型号**: NVIDIA A100 (80GB/40GB), H100, V100, RTX 4090, RTX 3090
- **卡数**: GPU数量
- **业务数据量**: 数据条数
- **数据类型**: 文本、图片、QA Pair、视频、音频(多选)
- **数据质量评价**: 高质量、中等质量、低质量
- **业务场景**: 自由文本描述
- **期望QPS**: 每秒查询数
- **用户并发数**: 并发用户数

### 2. 评估输出模块

#### 2.1 资源可行性评估
显示三个子模块,每个都有环形进度条:

**预训练**
- 环形进度条显示显存满足度百分比
- 是否可行的标识
- 建议列表

**微调**
- 环形进度条显示显存满足度百分比
- 是否可行的标识
- LoRA/QLoRA可行性分析
- 建议列表(包括是否需要量化、更换硬件等)

**推理**
- 环形进度条显示显存满足度百分比
- 支持的QPS和吞吐量数值展示
- 是否满足用户需求的标识
- 量化建议(如果不满足需求):
  - FP16, INT8, INT4各自的QPS和是否满足需求
- 建议列表

#### 2.2 技术方案合理性评估
- 综合评分(0-100)
- 发现的问题列表:
  - 检测是否应该用OCR而非大模型
  - 检测是否有视觉需求但选了文本模型
- 改进建议

#### 2.3 商业价值评估
- AI生成的价值评分(0-100)
- 详细的业务分析文本
- 风险列表
- 机会列表

#### 2.4 用户反馈
每个评估模块底部都有点赞/点踩按钮

### 3. 用户认证模块

**页面右上角**:
- 未登录时显示"登录"和"注册"按钮
- 登录后显示用户名和"登出"按钮

**认证对话框**:
- Tab切换登录/注册
- 登录表单: 邮箱、密码
- 注册表单: 用户名、邮箱、密码

### 4. 反馈功能

**浮动反馈按钮**:
- 位于页面右下角的圆形按钮
- 点击打开反馈对话框
- 反馈类型: 错误报告、功能建议、改进建议、其他
- 标题、详细描述、邮箱(可选)

## API接口

详细的API规范请查看 `docs/api-spec.md`

### 主要接口:

1. **POST /api/auth/register** - 用户注册
2. **POST /api/auth/login** - 用户登录
3. **POST /api/auth/logout** - 用户登出
4. **POST /api/evaluate** - 提交评估请求(核心接口)
5. **POST /api/feedback/module** - 提交模块反馈(点赞/点踩)
6. **POST /api/feedback/general** - 提交通用反馈

## 技术栈

- **前端框架**: Next.js 15 (App Router)
- **UI组件**: shadcn/ui (Radix UI)
- **样式**: Tailwind CSS
- **状态管理**: React Hooks
- **类型系统**: TypeScript

## 文件结构

```
ai-calculator/
├── app/
│   ├── api/
│   │   ├── auth/
│   │   │   ├── login/route.ts          # 登录API
│   │   │   ├── register/route.ts       # 注册API
│   │   │   └── logout/route.ts         # 登出API
│   │   ├── evaluate/route.ts           # 评估API
│   │   └── feedback/
│   │       ├── module/route.ts         # 模块反馈API
│   │       └── general/route.ts        # 通用反馈API
│   ├── page.tsx                        # 主页面
│   └── layout.tsx                      # 布局
├── components/
│   ├── auth-dialog.tsx                 # 认证对话框
│   ├── feedback-button.tsx             # 反馈浮动按钮
│   ├── circular-progress.tsx           # 环形进度条
│   └── ui/                             # UI组件库
├── lib/
│   └── types.ts                        # 类型定义
└── docs/
    └── api-spec.md                     # API规范文档
```

## 后端逻辑说明

当前后端是**演示逻辑**,主要功能:

1. **认证**: 简单的模拟认证,不连接真实数据库
2. **评估计算**:
   - 基于硬件规格和模型规格进行显存计算
   - 简化的QPS计算公式
   - 模拟的技术方案评估
   - 模拟的商业价值分析
3. **反馈**: 接收反馈并打印到控制台

## 运行项目

```bash
# 安装依赖
npm install

# 开发模式
npm run dev

# 访问
http://localhost:3000
```

## 下一步工作

要将演示逻辑升级为真实逻辑,需要:

1. **数据库集成**:
   - 用户表(存储用户信息)
   - 评估历史表(存储评估记录)
   - 反馈表(存储用户反馈)

2. **真实的资源计算**:
   - 精确的显存计算公式
   - 实际的QPS性能测试数据
   - 量化模型的准确参数

3. **AI评估**:
   - 接入真实的AI模型进行商业价值评估
   - 更智能的技术方案分析

4. **安全性**:
   - JWT token验证
   - 密码加密(bcrypt)
   - 输入验证和清洗
   - CORS配置

5. **性能优化**:
   - 评估结果缓存
   - 数据库查询优化
   - CDN部署

## 注意事项

- 当前版本仅用于演示和前端交互测试
- 不要在生产环境使用当前的认证逻辑
- 所有评估结果都是基于简化公式的估算
